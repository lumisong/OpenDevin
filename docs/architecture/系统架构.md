
# System Architecture Overview 系统架构概览

This is a high-level overview of the system architecture. The system is divided into two main components: the frontend and the backend. The frontend is responsible for handling user interactions and displaying the results. The backend is responsible for handling the business logic and executing the agents.

这是系统架构的高级概览。系统分为两个主要组件：前端和后端。前端负责处理用户交互和显示结果。后端负责处理业务逻辑并执行代理。

![system_architecture.svg](system_architecture.svg)

This Overview is simplified to show the main components and their interactions. For a more detailed view of the backend architecture, see the [Backend Architecture](#backend-architecture) section.

此概述被简化以显示主要组件及其交互。有关后端架构的更详细视图，请参见[后端架构](#backend-architecture)部分。

架构解析：用户交互 + 展示结果，业务逻辑 + 执行代理。

## Frontend Architecture 前端部分

- App：作为前端的主入口点，负责初始化和呈现整个前端应用程序。
- Components：这是UI组件的集合。
  - BannerSettings：可能用于显示和配置应用程序设置的组件。
  - ChatInterface：提供用户与系统交互的界面，例如发送命令或请求。
  - Terminal：模拟终端的界面，可能用于展示后端执行的结果或者直接与后端通信。
- Services：这代表前端逻辑服务的集合。
  - settingsService：与BannerSettings组件交互，管理应用设置。
  - chatService：处理与ChatInterface相关的逻辑，如发送消息、接收回复。
- socket：前端的服务通过socket与后端建立WebSocket连接。

前端使用 React 框架构建，主要包含以下功能：

- 命令输入框：用户输入命令的地方。
- 聊天界面：显示 OpenDevin 与用户之间的对话。
- 代码编辑器：用户可以编辑代码并提交给 OpenDevin 执行。
- 运行结果展示区域：显示 OpenDevin 执行命令后的结果。

## 后端部分

- Server：后端的核心服务器，负责处理来自前端的WebSocket连接。
  - Client WS (:3000/ws)：这是前端连接的WebSocket端点。
- AgentController：服务器的一部分，负责处理从WebSocket接收的命令，并控制代理的执行。

后端使用 Python 语言开发，主要包含以下组件：

- 

## 交互

- 前端的socket服务使用一个环境变量（VITE_TERMINAL_WS_URL）定义的URL连接到后端的WebSocket服务器。
- 用户通过前端的Terminal或ChatInterface与系统交互。
- 交互被前端的services捕获并通过socket传递到后端。
- 后端的Server接收来自前端的WebSocket请求，并通过AgentController处理这些请求。

## 总结

这个架构强调了模块化设计，每个组件都有其独立的职责。
前端和后端的通信通过WebSocket协议进行，这使得实时通信成为可能。
AgentController在后端起着核心作用，处理来自前端的所有操作和请求。
理解这个架构图对于您的快速学习和贡献至关重要，因为它不仅显示了各组件如何配合工作，还突出了交互的数据流。您可以据此确定学习的焦点，比如深入理解WebSocket通信，或者前端组件与服务如何处理用户输入和状态管理。

# Backend Architecture 后端架构

*__Disclaimer__: The backend architecture is a work in progress and is subject to change. The following diagram shows the current architecture of the backend based on the commit that is shown in the footer of the diagram.*

*__免责声明__：后端架构是一个正在进行的工作，可能会发生变化。以下图表显示了基于图表页脚中显示的提交的后端当前架构。*

![backend_architecture.svg](backend_architecture.svg)
